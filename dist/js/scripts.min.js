var myApp=angular.module("myApp",["ngRoute","angularUtils.directives.dirPagination"]).config(["$locationProvider","$routeProvider",function(e,n){n.when("/",{templateUrl:"./partials/home.html",controller:"MainController"}).when("/sample",{templateUrl:"./partials/sample.html",controller:"SampleController"}).otherwise({redirectTo:"/"}),e.html5Mode(!0)}]);angular.module("myApp").constant("Envconfig","https://jointhecrew.in/api/txns/"),angular.module("myApp").controller("SampleController",["$scope",function(e){e.test="hello..."}]),angular.module("myApp").controller("createTxnController",["$scope","taskList","Envconfig",function(e,n,t){e.createTransactionData={amount:"",currency:"",txn_date:(new Date).toISOString().slice(0,10)},e.processing=!1,e.creatTrans=function(r){if(r){e.processing=!0;var a=e.userDetails[0].user,o=t+a;n.createTransaction(e.createTransactionData,o).then(function(r){var a=r.data.id;o=t+e.userEmail+"/"+a,n.getTransaction(o).then(function(n){e.userDetails.push(n.data),e.processing=!1,alert("Success, transaction created!"),e.createTransactionData={amount:"",currency:"",txn_date:(new Date).toISOString().slice(0,10)}},function(e){alert("Something went wrong, Please reload the page!")})},function(e){alert("Something went wrong, Please try again!")})}}}]),angular.module("myApp").controller("MainController",["$scope","$filter","taskList","Envconfig",function(e,n,t,r){e.showResults=!1,e.noResults="",e.email="",e.detailExpanded=!1,e.showBoxOne=!1,e.processing=!1,e.showData=!1,e.getAllTransactions=function(n,a){if(a){e.email="priya@gmail.com",e.processing=!0;var o=r+e.email;t.getUser(o).then(function(n){e.userDetails=n.data,e.userEmail=n.data[0].user,e.numOfTxns=n.data.length,angular.forEach(e.userDetails,function(e){e.amount=parseFloat(e.amount),e.id=parseInt(e.id)}),e.processing=!1,e.showData=!0},function(e){alert("Something went wrong, Please try again!")})}},e.getTransaction=function(n,a){var o=parseInt(n),i=r+e.email+"/"+o;t.getTransaction(i).then(function(n){e.transactionData=n.data},function(e){alert("Something went wrong, Please try again!")})},e.saveTransaction=function(a,o){if(a){e.processing=!0;var i=n("getById")(e.userDetails,o),s=r+i.user+"/"+i.id;t.updateTransaction(s,i).then(function(n){n.data;e.processing=!1,alert("Success")},function(e){alert("Something went wrong, Please try again!")})}},e.deleteTrans=function(n){if(1==confirm("Do you want to continue ?")){e.processing=!0;var a=[];e.deleteItemId=n.id;var o=r+n.user+"/"+n.id;return t.deleteTransaction(o).then(function(n){e.transactionData=n.data,angular.forEach(e.userDetails,function(n){n.id!==e.deleteItemId&&a.push(n)}),e.userDetails=a,e.processing=!1,alert("Successfully deleted")},function(e){alert("Something went wrong, Please try again!")}),!0}return!1},e.sort=function(n){e.sortKey=n,e.reverse=!e.reverse}}]),angular.module("myApp").directive("restrictAlphabets",function(){return{restrict:"A",require:"ngModel",link:function(e,n,t,r){r.$parsers.push(function(e){var n=e.replace(/[^0-9]/g,"");return n!==e&&(r.$setViewValue(n),r.$render()),n})}}}),angular.module("myApp").filter("getById",function(){return function(e,n){for(var t=0,r=e.length;t<r;t++)if(+e[t].id==+n)return e[t];return null}}),angular.module("myApp").service("taskList",function(e,n){var t={};return t.getUser=function(t){var r=n.defer(),a=r.promise;return e({method:"GET",url:t}).then(function(e){r.resolve(e)},function(e){r.reject(e)}),a},t.createTransaction=function(t,r){var a=n.defer(),o=a.promise;return e({method:"POST",url:r,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t,transformRequest:function(e){var n=[];for(var t in e)n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")}}).then(function(e){a.resolve(e)},function(e){a.reject(e)}),o},t.getTransaction=function(t){var r=n.defer(),a=r.promise;return e({method:"GET",url:t}).then(function(e){r.resolve(e)},function(e){r.reject(e)}),a},t.updateTransaction=function(t,r){var a=n.defer(),o=a.promise;return e({method:"POST",url:t,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:r,transformRequest:function(e){var n=[];for(var t in e)n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")}}).then(function(e){a.resolve(e)},function(e){a.reject(e)}),o},t.deleteTransaction=function(t,r){var a=n.defer(),o=a.promise;return e({method:"DELETE",url:t,headers:{"Content-Type":"application/json;charset=utf-8"},data:r}).then(function(e){a.resolve(e)},function(e){a.reject(e)}),o},t});